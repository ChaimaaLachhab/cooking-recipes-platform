<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cooking     Y Recipe Platform</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container p-2">
            <a class="navbar-brand fs-4 fw-semibold text-white" href="#">
                <img src="./img/logo1.png" width="40px" class="img-fluid" alt="Logo" />
                CookingRecipes
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
                aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav fs-5 ms-auto me-5">
                    <li class="nav-item pe-2">
                        <a class="nav-link text-white" aria-current="page" href="home.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white active" href="recipe.html">Recipe</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="add.html">Add recipe</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#">About</a>
                    </li>
                </ul>
                <button class="btn btn-light fw-semibold fs-5">Login</button>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- title -->
        <h1 class="fw-bold" id="title"></h1>

        <div class="row row-cols-3 row-cols-lg-4 row-cols-md-2 align-items-start mt-3">
            <div class="col-md-4 mb-4 text-center">
                <div class="d-flex flex-column align-items-center border-end">
                    <img class="img-fluid" src="./img/chronometre.png" alt="">
                    <!-- Cooking Time -->
                    <div class="flex flex-col gap-1 items-center mt-3">
                        <h6 class="font-bold ">Cooking Time</h6>
                        <p class=""><span id="cookingTime"></span></p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4 text-center">
                <!-- Cook Time -->
                <div class="d-flex flex-column align-items-center border-end ">
                    <img class="img-fluid" src="./img/chronometre.png" alt="">
                    <div class="flex flex-col gap-1 items-center mt-3">
                        <h6 class="font-bold fs-6">Cook Time</h6>
                        <p class="fs-6"><span id="cookTime"></span></p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4 text-center">
                <!-- Category -->
                <div class="d-flexflex-column  align-items-center">
                    <img class="img-fluid" src="./img/restaurant.png" alt="">
                    <p id="category" class="items-center mt-4 fs-6"></p>
                </div>
            </div>
        </div>


        <div class="row">
            <!-- image de recipe -->
            <div class="col-md-7 mb-4">
                <div class="d-flex align-items-center min-width-100">
                    <img id="selectedImage" src="" alt="Photo" class="img-fluid border-danger-subtle rounded-4 w-100">
                </div>
            </div>
            <div class="col-md-5 mb-4">
                <!-- Nutrition Information -->
                <div class="bg-warning p-3 rounded-4">
                    <!-- Author Info -->
                    <div class="d-flex align-items-center gap- mb-4 p-3">
                        <!-- photo -->
                        <img id="selectedAuthorPhoto" src="" alt="Photo" width="90" height="90"
                            class="rounded-circle me-2">
                        <!-- name  -->
                        <p class="me-md-5 mt-3 fs-6" id="authorName"></p>
                    </div>
                    <h4 class="fw-bold mb-3 mt-2 fs-7">Nutrition Information</h4>
                    <div class="d-flex justify-content-between border-bottom border-dark mb-3">
                        <h6 class="me-4 fs-6">Calories:</h6>
                        <!-- Calories: -->
                        <p class="ms-4 fs-6"><span id="calories"></span> kcal</p>
                    </div>
                    <div class="d-flex justify-content-between border-bottom border-dark mb-3">
                        <h6 class="me-4 fs-6">Total Fat:</h6>
                        <!-- Total Fat: -->
                        <p class="ms-4 fs-6"><span id="totalFat"></span> g</p>
                    </div>
                    <div class="d-flex justify-content-between border-bottom border-dark mb-3">
                        <h6 class="me-4 fs-6">Protein:</h6>
                        <!-- Protein -->
                        <p class="ms-4 fs-6"><span id="protein"></span> g</p>
                    </div>
                    <div class="d-flex justify-content-between border-bottom border-dark mb-3">
                        <h6 class="me-4 fs-6">Carbohydrate:</h6>
                        <!-- Carbohydrate -->
                        <p class="ms-4 fs-6"><span id="carbohydrate"></span> g</p>
                    </div>
                    <div class="d-flex justify-content-between border-bottom border-dark mb-3">
                        <h6 class="me-4 fs-6">Cholesterol:</h6>
                        <!-- Cholesterol -->
                        <p class="ms-4 fs-6"><span id="cholesterol"></span> mg</p>
                    </div>
                </div>
                <!-- Rate the Recipe -->
                <div class="mt-3 p-3 rounded">
                    <h5 class="fw-bold me-4 fs-7">Rate the recipe </h5>
                    <div class="star-rating d-flex justify-content-center gap-3 p-2">
                        <span class="fa fa-star-o display-6" data-rating="1"></span>
                        <span class="fa fa-star-o display-6" data-rating="2"></span>
                        <span class="fa fa-star-o display-6" data-rating="3"></span>
                        <span class="fa fa-star-o display-6" data-rating="4"></span>
                        <span class="fa fa-star-o display-6" data-rating="5"></span>
                        <input type="hidden" name="whatever1" class="rating-value" value="2.56">
                    </div>
                </div>
            </div>
        </div>

        <!-- Description -->
        <div class="container">
            <h5 class="fw-bold me-4 fs-7">Description</h5>
            <p class="text-start mt-3 fs-6" id="description"></p>
        </div>
    </div>

    <!-- Recipe Content -->
    <div class="container mt-5 border-top p-4 gap-5 d-flex flex-wrap justify-content-start">
        <!-- Ingredients Section -->
        <div class="flex flex-col col-lg-4">
            <h2 class="text-start mb-4">Ingredients</h2>
            <ul class="list-group" id="addIngredient">
            </ul>
        </div>

        <!-- Instructions Section -->
        <div class="flex flex-col col-lg-7">
            <h2 class="text-start mb-4">Instructions</h2>
            <ul class="list-group" id="addInstruction">
            </ul>
        </div>
    </div>

    <!-- Rate the Recipe -->
    <div class="container mt-5 border-top p-4 gap-5 flex flex-col justify-content-center align-items-center">
        <h2 class="text-start mb-4">Rate the recipe</h2>
        <div class="star-rating d-flex justify-content-center gap-3 p-2">
            <span class="fa fa-star-o display-5" data-rating="1"></span>
            <span class="fa fa-star-o display-5" data-rating="2"></span>
            <span class="fa fa-star-o display-5" data-rating="3"></span>
            <span class="fa fa-star-o display-5" data-rating="4"></span>
            <span class="fa fa-star-o display-5" data-rating="5"></span>
            <input type="hidden" name="whatever1" class="rating-value" value="2.56">
        </div>
    </div>

    <!-- Comment Form Section -->
    <div class="container d-flex flex-column align-items-center justify-content-center rounded-5 p-3 my-5"
        style="background-image: url('./img/bg-comment.png'); background-position: center; background-size: cover;">
        <form class="col-lg-6">
            <h2 class="text-center mb-3">Leave a Reply</h2>
            <div class="form-group">
                <input type="text" class="form-control" id="nameInput" placeholder="Enter your name">
            </div>
            <div class="form-group mt-3">
                <input type="email" class="form-control" id="emailInput" placeholder="Enter your email">
            </div>
            <div class="form-group mt-3">
                <textarea class="form-control" id="commentTextarea" rows="3" placeholder="Your comment"></textarea>
            </div>
        </form>
        <button type="button" class="btn btn-dark mt-3" id="submitButton">Post comment</button>
        <div class="container col-lg-6 mt-5" id="commentsSection">
            <!-- comment ici -->
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center text-lg-start text-white bg-dark">
        <div class="container p-4 pb-0">
            <section class>
                <div class="row">
                    <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                        <h6 class="text-uppercase mb-4 fw-bold fs-5">
                            <img src="./img/logo1.png" class="me-1" width="70px" alt="logo" />
                            CookingRecipe
                        </h6>
                        <p>
                            Here you can use rows and columns to organize your footer
                            content. Lorem ipsum dolor sit amet, consectetur adipisicing
                            elit.
                        </p>
                    </div>
                    <hr class="w-100 clearfix d-md-none" />
                    <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                        <h6 class="text-uppercase mb-4 font-weight-bold">Products</h6>
                        <p>
                            <a class="text-white">Home</a>
                        </p>
                        <p>
                            <a class="text-white">Recipe</a>
                        </p>
                        <p>
                            <a class="text-white">Contact</a>
                        </p>
                        <p>
                            <a class="text-white">About</a>
                        </p>
                    </div>
                    <hr class="w-100 clearfix d-md-none" />
                    <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
                        <h6 class="text-uppercase mb-4 font-weight-bold">Useful links</h6>
                        <p>
                            <a class="text-white">Your Account</a>
                        </p>
                        <p>
                            <a class="text-white">Become an Affiliate</a>
                        </p>
                        <p>
                            <a class="text-white">Shipping Rates</a>
                        </p>
                        <p>
                            <a class="text-white">Help</a>
                        </p>
                    </div>
                    <hr class="w-100 clearfix d-md-none" />
                    <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                        <h6 class="text-uppercase mb-4 font-weight-bold">Contact</h6>
                        <p><i class="fas fa-home mr-3"></i> New York, NY 10012, US</p>
                        <p><i class="fas fa-envelope mr-3"></i> info@gmail.com</p>
                        <p><i class="fas fa-phone mr-3"></i> + 01 234 567 88</p>
                        <p><i class="fas fa-print mr-3"></i> + 01 234 567 89</p>
                    </div>
                </div>
            </section>
            <hr class="my-3" />
            <section class="p-3 pt-0">
                <div class="row d-flex align-items-center">
                    <div class="col-md-7 col-lg-8 text-center text-md-start">
                        <div class="p-3">
                            © 2024 Copyright:
                            <a class="text-white" href="#">CookingRecipe</a>
                        </div>
                    </div>
                    <div class="col-md-5 col-lg-4 ml-lg-0 text-center text-md-end">
                        <a class="btn btn-outline-light btn-floating m-1" class="text-white" role="button"><i
                                class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-floating m-1" class="text-white" role="button"><i
                                class="fab fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-floating m-1" class="text-white" role="button"><i
                                class="fab fa-google"></i></a>
                        <a class="btn btn-outline-light btn-floating m-1" class="text-white" role="button"><i
                                class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </section>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script>
        function initializeComments() {
            let comments = JSON.parse(localStorage.getItem("comments")) || [];

            const commentsSection = document.getElementById('commentsSection');
            const nameInput = document.getElementById('nameInput');
            const emailInput = document.getElementById('emailInput');
            const commentTextarea = document.getElementById('commentTextarea');
            const submitButton = document.getElementById('submitButton');

            submitButton.addEventListener('click', function (event) {
                event.preventDefault();
                submitComment();
            });

            displayComments();

            function submitComment() {
                const name = nameInput.value;
                const email = emailInput.value;
                const comment = commentTextarea.value;

                if (name.trim() !== '' && email.trim() !== '' && comment.trim() !== '') {
                    const newComment = {
                        name: name,
                        email: email,
                        comment: comment
                    };

                    comments.push(newComment);
                    localStorage.setItem("comments", JSON.stringify(comments));
                    displayComments();

                    nameInput.value = '';
                    emailInput.value = '';
                    commentTextarea.value = '';
                }
            }

            function displayComments() {
                commentsSection.innerHTML = '';

                if (comments && comments.length > 0) {
                    comments.forEach((comment, index) => {
                        const commentElement = document.createElement('div');
                        commentElement.classList.add('bg-light-subtle', 'bg-transparent', 'rounded-4', 'border', 'p-3', 'my-3');
                        commentElement.innerHTML = `
                            <h5 class="text-secondary pb-0">${comment.name}</h5>
                            <p class="text-secondary border-bottom pb-3">${comment.email}</p>
                            <p class="mx-5 my-1" style="word-wrap: break-word;">${comment.comment}</p>
                            <button class="btn btn-dark mt-3 delete-comment-btn" data-index="${index}">Supprimer</button>
                        `;
                        commentsSection.appendChild(commentElement);
                    });

                    const deleteButtons = document.querySelectorAll('.delete-comment-btn');
                    deleteButtons.forEach(button => {
                        button.addEventListener('click', function (event) {
                            const indexToDelete = event.target.dataset.index;
                            comments.splice(indexToDelete, 1);
                            localStorage.setItem("comments", JSON.stringify(comments));
                            displayComments();
                        });
                    });
                }
            }
        }
        initializeComments();

        const selectedIndex = localStorage.getItem("selectedRecipeIndex");
        const recip = JSON.parse(localStorage.getItem("recipes"));

        if (recip && recip.length > selectedIndex) {
            const selectedRecipe = recip[selectedIndex];
            // Remplir les éléments HTML avec les détails de la recette
            document.getElementById('title').innerText = selectedRecipe.title;
            document.getElementById('category').innerText = selectedRecipe.category;
            document.getElementById('cookingTime').innerText = `${selectedRecipe.cookingTime.hours} h ${selectedRecipe.cookingTime.minutes} min`;
            document.getElementById('cookTime').innerText = `${selectedRecipe.cookTime.hours} h ${selectedRecipe.cookTime.minutes} min`;
            document.getElementById('authorName').innerText = selectedRecipe.authorName;
            document.getElementById('selectedAuthorPhoto').src = selectedRecipe.authorPhoto;
            document.getElementById('selectedImage').src = selectedRecipe.recipeImage;
            document.getElementById('description').innerText = selectedRecipe.description;
            document.getElementById('calories').innerText = selectedRecipe.nutritionInformation.calories;
            document.getElementById('totalFat').innerText = selectedRecipe.nutritionInformation.totalFat;
            document.getElementById('protein').innerText = selectedRecipe.nutritionInformation.protein;
            document.getElementById('carbohydrate').innerText = selectedRecipe.nutritionInformation.carbohydrate;
            document.getElementById('cholesterol').innerText = selectedRecipe.nutritionInformation.cholesterol;

            let ingredientList = document.getElementById('addIngredient');
            ingredientList.innerHTML = '';
            selectedRecipe.ingredients.forEach(ingredient => {
                let li = document.createElement('li');
                li.classList.add('list-group-item');
                li.textContent = ingredient;
                ingredientList.appendChild(li);
            });

            let instructionList = document.getElementById('addInstruction');
            instructionList.innerHTML = '';
            selectedRecipe.instructions.forEach((instruction, index) => {
                let li = document.createElement('li');
                li.classList.add('list-group-item');
                li.textContent = `${index + 1}. ${instruction}`;
                instructionList.appendChild(li);
            });
        } else {
            console.log("Recipe not found in localStorage.");
        }
    </script>
    <script src="script.js"></script>
</body>

</html>
